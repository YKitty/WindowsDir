# 反向代理和正向代理

-----------

## 前言

这周末出去租房子住，终于看到一个心仪的房子，结果房东是一个二房东。

这个就是一个反向代理的例子。

**反向代理：客户端发送一个请求给代理服务器，代理服务器将这个请求转发给自己内部的一个服务器，然后该服务器对于这个请求做出处理，反馈给代理服务器，这个时候代理服务器在将这个响应发送给客户端。此时代理服务器对外就相当于是一个反向代理服务器**

再讲反向代理之前首先要知道正向代理是一个什么东西

## 正向代理

**正向代理：是一个位于客户端和目标服务器之间的服务器(代理服务器)，为了从目标服务器获得内容，客户端向代理服务器发送一个请求并指定目标，然后代理服务器向目标服务器转交请求并将获得的内容返回给客户端**

举例：有的时候我们想访问国外网站，该网站无法在国内直接访问，但是我们可以访问到一个代理服务器，这个代理服务器可以访问到国外网站。这样呢，用户对于国外网站的访问就需要通过代理服务器来转发请求，并且该代理服务器也会将请求的响应返回给用户。这个上网的过程就是正向代理

1. PC无法直接访问WEB服务器，但代理服务器可以访问
2. 代理服务器帮助PC请求页面并缓存在本地，并将页面返回给PC

**【注意】：PC只需要浏览器设置代理服务器的IP和端口即可，PC知道代理服务器和WEB服务器的存在**

**正向代理，代理服务器代理了客户端和目标服务器进行交互**

**正向代理的好处：**

- **突破访问限制**

通过代理服务器可以突破自身IP限制，访问国外网站等

- **提高访问速度**

通常代理服务器都会设置一个磁盘缓存区，会将一个客户端请求的所返回响应存储在缓存区中，当其他用户再次访问相同的资源的时候，直接从缓存区中拿取信息，返回给其他用户，提高了速度

- **隐藏客户端真实IP**

上网者可以通过这种方式来隐藏自己的IP，防止受到攻击

## 反向代理

**反向代理其实就是代理服务器代理目标服务器和客户端进行交互**

**反向代理的好处：**

- 隐藏服务器真实IP

使用反向代理可以隐藏服务器的真实IP

- 负载均衡

反向代理服务器可以做到负载均衡，对于客户端到来的请求，根据真实的服务器的负载情况，将其请求发送到负载较低的服务器上

- 提高访问速度

反向代理服务器可以对于静态页面及短时间内有大量访问请求的动态内容提供缓存服务，提高了访问速度

- 提供安全保障

反向代理服务器可以作为应用层防火墙，为网站服务器提供基于Web的攻击行为(DOS)的防护。

**【注意】：反向代理对于PC浏览器不需要设置代理服务器的IP地址和端口号，这是因为对客户端不知道代理服务器的存在**

## 正向代理和反向代理的区别

虽然正向代理和反向代理都是在客户端和目标服务器之间存在一个代理服务器，都是将客户端的请求发送给目标服务器，然后将目标服务器的响应发挥给客户端，但是还是有所差异的

1. **正向代理是客户端的代理**，帮助客户端访问其无法访问的服务器资源。**反向代理是服务器的代理**，帮助服务器负载均衡以及安全防护
2. **正向代理一般是客户端架设的**，比如在自己的机器上安装一个代理软件。而**反向代理一般都是服务器架设的**，比如在自己的机器集群中部署一个反向代理服务器
3. **正向代理中，服务器不知道真正的客户端是谁**，以为访问自己的就是真正的客户端。**反向代理中，客户端不知道真正的服务器是谁**，以为自己访问的就是真的的服务器
4. 正向代理和反向代理的作用和目的不一样。**正向代理主要是用来解决访问限制的问题。反向代理则是提供负债均衡和安全防护等作用。二者均能提高访问速度**

## 总结

- 正向代理和反向代理都时中间有着一个代理服务器，但是对于正向代理知道这个代理服务器的存在，对于反向代理不知道代理服务器的存在。

参考文献：微信公众号【码农有道】