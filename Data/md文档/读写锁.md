# 读写锁

##1. 定义

> **读写锁也叫作共享互斥锁** 
>
> - 当是读模式下的锁，就可以说是以共享模式锁住的
> - 当是写模式下的锁，就可以说是以互斥模式锁住的



## 2. 读写锁的三种状态

> - 读模式下加锁状态
> - 写模式下加锁状态
> - 不加锁状态



## 3. 理解

> **一次只能有一个线程拥有写模式下的读写锁，但是对于多个线程可以同时拥有读模式下的读写锁**
>
> - 当读写锁是**写模式下的加锁状态**
>   - 任何线程**来申请何种读写锁都会被阻塞**，直到写模式下的读写锁释放
> - 当读写锁是**读模式下的加锁状态**
>   - 如果有线程来**申请读模式下的读写锁**，**可以申请**到读写锁。
>   - 当有线程来**申请写模式的读写锁**，该线程会**被阻塞**，**直到所有线程都释放读锁**，对于该线程之后来申请写模式下的读写锁会被阻塞在申请写模式的线程之后。因为如果**不阻塞在写模式的读写锁之后，就有可能导致，写模式的读写锁无法申请到，导致写饥饿的问题。**
>
> **【总结】**
>
> - 所以读写锁适用于对数据结构读的次数大于写的次数
> - 当读写锁在写模式下时，他保护的数据就可以被安全的修改，因为一次只能有一个线程再写模式下拥有该锁
> - 当读写锁在读模式下时，只要线程先获得了读模式下的锁，那么所有获得读模式锁的线程都可以读取该数据结构



## 4. 读写锁与互斥量的比较

> **读写锁在使用前，必须初始化，在释放他们底层内存的时候必须销毁**



## # 优点

> 具有更好的并发性



