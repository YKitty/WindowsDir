# git

## 1.git介绍

> - git:版本控制工具。（同类工具：svn， hg， vsc）
> - github:全球最大的同性社交网站
>   - source forage
>   - google code
>   - gitlab
>   - 码云
>   - 码市

## 2.git相关操作

> - clone：把服务器上的项目下载到本地
>
>   - ```c++
>     git clone "下载的网址"
>     ```
>
> - add：告诉git工具哪些文件是需要进行版本控制的(新增文件- )
>
>   - ```c++
>     git add "添加的文件名"
>     git add * //添加所有文件
>     ```
>
> - commit：把代码的改定提交到版本控制中（提交到本地，而不是提交到服务器上）
>
>   - ```c++
>     git commit -m "描述性信息"：
>     
>     git commit. ;//可以直接进入到自己输入描述性信息的页面，不需要直接输入描述性信息
>     
>     git commit -a;//强制提交
>     ```
>
> - push:被我们本地的修改推送到服务器上
>
>   - ```c++
>     git push origal master
>     ```



## 3.git的其他常用操作

> - pull:将服务器代码拉到本地
>
>   - ```c++
>     git pull
>     ```
>
> - diff:查看本地的详细修改
>
>   - ```c++
>     git diff
>     ```
>
> - status:查看哪些代码发生修改，不包含详细信息
>
>   - ```c++
>     git status
>     ```
>
> - log:查看修改的版本日志，时间由近到远
>
>   - ```c++
>     git log
>     ```
>
> - reset:回退到指定的版本
>
> - reflog：记录了git在本地的核心操作，来找到我们git log 所看不到的版本
>
> - branch:完成对分支的操作
>
>   - 不加其他参数，查看当前有哪些分支
>   - 加上分支名字，在本地创建一个指定名字的分支
>   - -d 分支名字，删除分支
>
> - checkout：切换分支
>
>   - 不加参数，切换分支
>   - 加-b选项，创建并且切换分支
>
> - merge：合并分支的代码
>
>   - ```c++
>     //合并时的重要问题：冲突
>     
>     master分支和dev分支都是一个main.c
>     
>     在dev分支中修改了mian.c，在最开始新增了一行代码。printf("haha\n");
>     在master也修改了main.c，也在最开始的地方新增了一行代码。printf("hehe\n");
>     
>     
>     //冲突：
>     //同一个的代码在不同的分支中都被进行了修改，此时尝试merge两个分支，就会产生冲突
>     打开文件显示：
>     <<<<<<< HEAD
>     //hehe
>     =======
>     //haha
>     >>>>>>> DEV
>     
>     //解决冲突
>     可以手动解决冲突代码，直接进入到文件中进行删除，添加等等操作
>     git commit -a;//强制提交
>     
>     
>     ```
>
> - stash:能够临时保存当前的修改内容，让我们即使处理其他分支的情况







## 4.配置.gitignore(点开头的是隐藏文件)

> - ```c++
>   vim .gitignore;
>   //里面写   *.o  
>   //表示用.o做后缀的文件都不提交上去
>   ```



## 5.版本回退（HEAD指针的移动）

> 如果有一天你发现之前的工作出了很大的问题，需要在某一个特定点从新开始，这个时候我们就需要版本回退的功能了。
>
> 为了可以看到我们的历史版本，我们可以使用`git log`命令
>
> ```c++
> git log --pretty==oneline; //第一列是版本号
> //展示出来是每个版本一行输出
> ```
>
> ```c++
> //回退到以前的一个状态，新的版本已经没了
> git reset --hard "版本号";
> 
> //显示我们做的所有的核心操作，只显示版本号的一部分
> git reflog;
> 
> ```
>
> 
>
>



## 6. 分支管理

> 分支的概念：
>
> 背景：100多人维护同一份代码
>
> 假设这个代码在一个服务器上只有一份，每个人都会把自己的改动提交到这个服务器的这一份代码
>
> 有一天汤老师提交了一份代码。提交之后就下班回家了，请了两天假，其他人更新了代码，编译不过。
>
> 分支就是为了解决这个问题。
>
> 汤老师在开发代码的时候，基于服务器上的这一份代码，创建一个分支（对服务器上的代码拷贝了一份）。汤老师自己创建的这个分支，称为开发分支（dev），服务器上原来的代码称为主线（master），后续我把代码提交到dev分支上，不会对master进行任何影响。直到我代码开发完，测试完，再把dev分支的代码合并到master。
>
> ```c++
> git branch;//完成对分支的操作，不加其他参数，就是查看当前有哪些分支
> 
> git branch dev;//创建dev分支
> 
> //查看分支后，哪个分支前面有*，表示处于哪个分支
> git branch;
> 
> git checkout dev;//切换分支到dev
> 
> git chekout -b dev;//创建一个dev分支，并且切换到dev分支
> 
> git merge dev;//将dev分支中的改动，合并到master分支中
> 
> git branch -d dev;//删除dev分支
> 
> 
> ```
>
> #### 分支管理策略
>
> - 通常，合并分支时，如果可能，GIt会用`Fast forward`模式，但这种模式下，删除分支后，会丢掉分支信息。如果要强制禁用`Fast forward`模式，Git就会在merge是生成一个新的commit，这样，从分支历史上就可以看到分支信息。
> - 下面我们实战一下`--no--ff`方式的git merge：
>
> bug分支：
>
> ```C++
> 实际开发中常见的应用场景：
> 场景一：
> 开发一个功能，创建dev分支，在这个dev分支开始开发。
> 开发到一半的时候，master上发现一个bug，需要立刻修复。
> 如果此时的dev分支是多人共用，此时我们就不能吧当前dev分支中修改一般的代码提交上去。
> 如果直接尝试切换到master就会出现切换失败的情况
> 
> //可以多次stash
> //先git stash，在切换到master分支
> git stash;//stash （存放）
> 
> git stash pop;//可以将修改的代码，在拉取回来
> 
> git stash list;//可以显示所有stash下来的记录，指定某个stash恢复
> 
> 场景二:
> 假设你在开发一个需求马上要开发完了，产品经理说，这个需求不做了，此时修改的这些代码，不需要合并到master分支。这个分支可以删除
> 
> 先切换到其他分支：
> git branch -d dev;//删不掉这个代码还没有merge过呢，如果实在想删就用git branch -D dev(强制删除没有合并的分支)
> 
> git branch -D dev;//强制删除一个没有merge的分支
> ```
>
> 

## 7. 多人合作开发

> 1. 直接基于master来开发（实际工作中，严格禁止的）
>
> ```c++
> 第一步，先clone一份代码
> 必须先git pull，然后再能git push
> pull下来有可能冲突，解决冲突，然后再次commit，push
>  
> ```
>
> 2. 基于共同的dev分支来进行开发
>
> ```c++
> 必须先告诉服务器有dev这个分支
> 
> git push origin dev;//将dev分支同步到服务器上
> 
> git checkout -b dev origin/dev;//从服务器上将分支拉下来
> 
> 
> ```
>
> 



## 8. 标签管理

> 需要对代码进行发布版本。使用标签机制告诉我们哪份代码是需要进行发布的
>
> 一般不会直接发布master上的最新代码
>
> ```c++
> //git tag,只是在本地创建标签
> git tag v1.0;//创建一个名字为v1.0的标签
> 
> 使用git tag 查看有哪些标签
> 
> git tag -a v1.1 [版本标识符]
> 
> git push origin [标签名] 对应的标签推送到服务器上
> 
> 删除标签
> 删除本地标签
> git tag -d [标签名]（v1.0）;//将本地标签进行删除
> 删除服务器标签：尽量避免
> 避免删除服务器标签
> 
> ```
>
> 
>
> 