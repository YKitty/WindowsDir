# 文件I/O

## 引言：

对于read和write这些函数我们一般都是称其为不带缓存的I/O。**术语**不带缓冲都是每一个read和write都调用内核的一个系统调用。

对于**不带缓冲的I/O函数**都**不是ISO C**的组成部分，但是，都是**POSIX.1**的组成部分。

## 文件描述符

>  文件描述符是一个**非负整数**。
>
> 当打开一个现有文件或者创建一个新文件的时候，内核向进程返回一个文件描述符。当读或者写一个文件是，使用open或者creat返回文件的描述符标识该文件，并将其作为参数传递给read或者write。
>
> 对于Linux下，文件描述符0,1,2分别对应的是stdin，stdout，stderr。标准输入流，标准输出流，标准错误流。
>
> **文件描述符的范围**：
>
> - 0--OPEN_MAX。
> - 对于早期的OPEN_MAX是20，现在很多系统都将其增至68.
> - 查看自己的linux的OPEN_MAX的方法：直接使用`ulimit -a`命令就好了
> - 因为对于linux的内核版本高于2.6.24的话，OPEN_MAX不在limit.h头文件里面定义了



## open函数

> 调用open函数可以打开或者创建一个文件	
>
> ``` c++
> #include <fcntl.h>
> 
> int open(const char* parhname, int flags, .../*mode_t mode*/);
> 参数：
> 	pathname：要打开或者创建文件的名字
> 	
> 返回值：成功返回文件描述符，若出错返回-1
> ```
>
> 对于第三个参数是...，ISO C用这种方法表示余下的参数是根据具体的调用决定的。（可变参数函数）
>
> 对于open函数来说，第三个参数只是在创建文件的时候有用。用来表示文件的属性
>
> **文件描述符的分配规则**
>
> - 对于文件描述符一定是当前未用的最小的描述符值



